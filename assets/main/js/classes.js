// Generated by CoffeeScript 1.4.0
(function() {
  var App;

  App = {};

  App.metagames = [];

  App.players = [];

  App.Metagame = (function() {

    function Metagame() {
      this.id = 1;
    }

    Metagame.prototype.url = function() {
      return "/" + this.id;
    };

    Metagame.prototype.isAcceptingPlayers = function() {
      return true;
    };

    Metagame.prototype.serverInit = function(io) {
      return this.room = io.of("/" + this.id).on('connection', function(socket) {
        return socket.on('player added', function(data) {
          console.log(data);
          return socket.broadcast.emit('player added', data);
        });
      });
    };

    Metagame.prototype.clientInit = function(io) {
      this.socket = io.connect("/" + this.id);
      this.socket.emit('player added', {
        player: App.player.name
      });
      return this.socket.on('player added', function() {
        return console.log('player added');
      });
    };

    return Metagame;

  })();

  App.Player = (function() {

    function Player(name) {
      this.name = name;
    }

    return Player;

  })();

  App.Minigame = (function() {

    function Minigame() {}

    return Minigame;

  })();

  App.Utilities = {
    resizeViewport: function() {
      var view, viewSize, viewport, windowSize;
      windowSize = {
        width: $(window).width(),
        height: $(window).height()
      };
      view = $('body > div.view.active');
      if (view.length === 0) {
        return;
      }
      viewSize = {
        width: view.width(),
        height: view.height()
      };
      view.css({
        position: 'absolute',
        top: '50%',
        left: '50%',
        marginTop: "-" + (viewSize.height / 2) + "px",
        marginLeft: "-" + (viewSize.width / 2) + "px"
      });
      windowSize.ratio = windowSize.width * 1.0 / windowSize.height;
      viewSize.ratio = viewSize.width * 1.0 / viewSize.height;
      viewport = document.querySelector("meta[name=viewport]");
      if (viewSize.ratio < windowSize.ratio) {
        return viewport.setAttribute('content', 'width=' + (viewSize.height * windowSize.ratio) + ', user-scalable=0');
      } else {
        return viewport.setAttribute('content', 'width=' + viewSize.width + ', user-scalable=0');
      }
    }
  };

  if (typeof module !== "undefined" && module !== null) {
    module.exports = App;
  } else {
    window.App = App;
  }

}).call(this);
