// Generated by CoffeeScript 1.6.3
(function() {
  var socket;

  window.App = {
    room: null,
    data: {},
    useRift: true
  };

  socket = io.connect('/');

  socket.on("disconnect", function(data) {
    $('#disconnected').fadeIn(500);
    return setTimeout("location.href = '/'", 4500);
  });

  socket.on('connect', function() {
    socket.emit('init: add client');
    return console.log("Establishing room...");
  });

  socket.on("init: connected to room", function(data) {
    console.log("Connected to room: " + data.room);
    App.room = data.room;
    return $('#room').text(App.room);
  });

  socket.on("room: data", function(data) {
    var key, value, _results;
    $('#hud .controller .disconnected').fadeOut(250);
    $('#hud .controller .connected').fadeIn(250);
    App.data = data;
    _results = [];
    for (key in data) {
      value = data[key];
      if (typeof value === "number") {
        _results.push($("#" + key).text(value.toFixed(2)));
      } else {
        _results.push($("#" + key).text(value));
      }
    }
    return _results;
  });

  socket.on("server: controller disconnected", function(data) {
    $('#hud .controller .disconnected').fadeIn(250);
    return $('#hud .controller .connected').fadeOut(250);
  });

  document.addEventListener('keydown', function(event) {
    if (event.keyCode === 68) {
      return $('.debug').toggle();
    }
  });

}).call(this);
