// Generated by CoffeeScript 1.4.0
(function() {
  var form, socket;

  socket = io.connect('/');

  form = document.getElementById("user-form");

  form.onsubmit = function() {
    var _this = this;
    socket.emit("new player", {
      name: this.elements["username"].value
    });
    socket.on("enter metagame", function(data) {
      if (data.metagame_id != null) {
        App.metagame = new App.Metagame(data.metagame_id);
        console.log("Connecting to " + data.metagame_id);
        return App.metagame.clientInit(io, _this.elements["username"].value);
      }
    });
    $("button").attr('disabled', 'disabled');
    return false;
  };

}).call(this);
